# To install: android-ndk
language:
  - haxe
  - android
os:
  - linux
cache:
  directories:
  - "/home/travis/haxe/lib"
android:
  components:
    - ndk
#before_install:
#  - sudo apt-get -qq update
#  - sudo apt-get install -y
install:
  - echo $(haxelib config)
  - travis_wait haxelib --always install flixel
  - yes | travis_wait haxelib run lime setup
  - travis_wait haxelib --always set hxcpp 3.4.64
  - yes | travis_wait haxelib run lime setup android
  - yes | travis_wait haxelib run lime setup blackberry
  - yes | travis_wait haxelib run lime setup flash
  - yes | travis_wait haxelib run lime setup html5
  - yes | travis_wait haxelib run lime setup ios
  - yes | travis_wait haxelib run lime setup linux
  - yes | travis_wait haxelib run lime setup mac
  - yes | travis_wait haxelib run lime setup windows
script:
  - travis_wait haxelib run lime build android
  - travis_wait haxelib run lime build blackberry
  - travis_wait haxelib run lime build flash
  - travis_wait haxelib run lime build html5
  - travis_wait haxelib run lime build ios
  - travis_wait haxelib run lime build linux
  - travis_wait haxelib run lime build mac
  - travis_wait haxelib run lime build windows
before_deploy:
  - travis_wait haxelib run lime deploy android
  - travis_wait haxelib run lime deploy blackberry
  - travis_wait haxelib run lime deploy flash
  - travis_wait haxelib run lime deploy html5
  - travis_wait haxelib run lime deploy ios
  - travis_wait haxelib run lime deploy linux
  - travis_wait haxelib run lime deploy mac
  - travis_wait haxelib run lime deploy windows
deploy:
  provider: releases
  api_key:
    secure: kaNIT9RrAMKgsfAGJ63xRnArMUJCZJIRrRJqpYVMV/hKq0NF8BNvtmTiXflFofnSyFrQDLaF5uEH3OSCHkbAS7YtK8rlg6VTR75FhHYoPkdMVDxlrLUzAGj81aJV0YuujLOxh+o/0xcpen+yoxIV6kL1S0H2juWYlgayCou7nGoRCf06A0eR1MJBjluj+Tovi+gIgqFc9g4EBlRyzeMK7TxWAzULVpxBbz635mXGde8ZrGpTTd2Jxsum3wbSsk0/xWkpA4YUwy3F8eqiyTxwp9h6Qaoe/7K9mMpKfb4l48p78sWCNwjlUullzh5kQA06tPjtMUzx95C7Awd5jNzJdvqPH3VTt7+/ejSW8PcXjlLJaI0ldFV6+PgOqa2ywcSFmovw1nVUPdDDFF9ToNeanmdiwAobiUAHxr4cmB9oUreoqWNLuITJRBU2kYHbrZkuNsnMXYQIzgjbcmE/5hycnIsWIQU4zuVndbxCnaMZEdZD8cpFOtDm7JcGCRZyyl9hU3J4B+iOFwZ+Lb6tq4LC6UvfQy+r36963NcIweHF+mPjXdViYJf8yXyuahLcrK66nE6iU18+ZnmSJ7mYCaz46unLbxxC5avMy4KTu6VsYiM2tvi+yhg/4M+kWOW8SMI4nKb6c2TC01fHudpzXZVhTnHAPP1QTQjx9fFAkI6vAuI=
  file_glob: true
  file:
    - export/linux64/cpp/FollowTheBeat*.zip
  skip_cleanup: true
  on:
    tags: true
after_deploy:
  - rm -f export/linux64/cpp/FollowTheBeat*.zip
